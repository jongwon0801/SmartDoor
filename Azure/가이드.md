1. 계정생성

2. 키 생성

3. 리소스 그룹생성

4. iot hub 생성

5. 디바이스 생성

6. 기본 연결문자열 복사


```
✅ 라즈베리파이에 SDK 설치 (Python 예시)

```less
IoT Hub와 연결하려면 Python용 SDK 설치

pip install azure-iot-device
```

✅ 라즈베리파이에서 메세지보내기

```less
from azure.iot.device import IoTHubDeviceClient

CONNECTION_STRING = "HostName=smartdoor.azure-devices.net;DeviceId=smartdoor1;SharedAccessKey=L6nXuaejjwCA51bdBLIoCgPOE2RNxtz7PlzeXII6xdg="

device_client = IoTHubDeviceClient.create_from_connection_string(CONNECTION_STRING)

# 연결
device_client.connect()

# 메시지 전송
device_client.send_message("Hello from Raspberry Pi!")

print("Message sent!")

# 연결 종료
device_client.disconnect()

```
#### 클라우드 -> 라즈베리 메세지확인
```less
from azure.iot.device import IoTHubDeviceClient

CONNECTION_STRING = "HostName=smartdoor.azure-devices.net;DeviceId=smartdoor1;SharedAccessKey=L6nXuaejjwCA51bdBLIoCgPOE2RNxtz7PlzeXII6xdg="

def message_handler(message):
    print("Received message:")
    print(message.data)
    print("Properties:", message.custom_properties)

client = IoTHubDeviceClient.create_from_connection_string(CONNECTION_STRING)
client.on_message_received = message_handler

print("Listening for messages...")
client.connect()

import time
try:
    while True:
        time.sleep(1)
except KeyboardInterrupt:
    print("Stopping")
finally:
    client.shutdown()


```

#### 메세지오면 문열기
```less
from azure.iot.device import IoTHubDeviceClient

CONNECTION_STRING = "HostName=smartdoor.azure-devices.net;DeviceId=smartdoor1;SharedAccessKey=L6nXuaejjwCA51bdBLIoCgPOE2RNxtz7PlzeXII6xdg="


def message_handler(message):
    try:
        # message.data는 bytes이므로 디코딩
        msg = message.data.decode('utf-8').strip()
    except Exception as e:
        print("메시지 디코딩 오류:", e)
        msg = ""

    print("Received message:", msg)
    print("Properties:", message.custom_properties)

    # 메시지가 'open'이면 문 열기 함수 실행
    if msg.lower() == "open":
        doorOpenProcess()

client = IoTHubDeviceClient.create_from_connection_string(CONNECTION_STRING)
client.on_message_received = message_handler

print("Listening for messages...")
client.connect()

try:
    while True:
        time.sleep(1)
except KeyboardInterrupt:
    print("Stopping")
finally:
    client.shutdown()

```
