#### 알사오디오로 재생
```less
# 테스트용 쌩 sd 카드
aplay -D plughw:1,0 /home/pi/sound/bell.wav

# 전시회 이후 sd 카드에서 한거
aplay -D plughw:1,0 /home/pi/www/sound/bell.wav

# 테스트용 쌩 sd 카드
cvlc --aout=pulse --play-and-exit /home/pi/sound/bell

# usb 오디오 되는 거
paplay --device=alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo /home/pi/sound/bell.wav

# 안되는거 칩에 있는 거
paplay --device=alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo.2 /home/pi/sound/bell.wav
```

#### 심링크 등록
```less
sudo nano /etc/udev/rules.d/99-com.rules

SUBSYSTEM=="sound", KERNELS=="card1", ATTRS{id}=="Device", ATTRS{idVendor}=="0d8c", ATTRS{idProduct}=="0012", SYMLINK+="usb_audio"

sudo udevadm control --reload-rules && sudo udevadm trigger
```

#### 알사 출력장치 조회
```less
aplay -l           # 재생 가능한 오디오 장치 목록

arecord -l         # 녹음 가능한 오디오 장치 목록

cat /proc/asound/cards    # 설치된 사운드카드 목록
```

```less
pactl list short sinks

0	alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo	module-alsa-card.c	s16le 2ch 44100Hz	SUSPENDED
1	alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo.2	module-alsa-card.c	s16le 2ch 44100Hz	SUSPENDED
```

```less
cat /proc/asound/cards

 1 [Device         ]: USB-Audio - USB Audio Device
                      C-Media Electronics Inc. USB Audio Device at usb-0000:01:00.0-1.1.1, full speed
 2 [Device_1       ]: USB-Audio - USB Audio Device
                      C-Media Electronics Inc. USB Audio Device at usb-0000:01:00.0-1.4.1, full speed

# USB 오디오 장치의 상세 정보를 확인
udevadm info -a -p $(udevadm info -q path -n /dev/snd/by-id/usb-C-Media_Electronics_Inc._USB_Audio_Device-00)

udevadm info -a -p $(udevadm info -q path -n /dev/snd/controlC1)
```

#### 출력 장치 조회
```less
pacmd list-sinks | grep -E 'name:|device.description|index|state'

pacmd list-sinks | grep '* index'

pactl list short sinks

pactl list sinks

pactl info
```

#### 출력 장치 현재 세션 변경
```less
# USB 오디오 장치로 변경
pacmd set-default-sink 0

# 내장 오디오로 변경
pacmd set-default-sink 2

# HDMI 오디오로 변경
pacmd set-default-sink 3
```

#### 재생하고 싶은 장치에 따라 다음과 같이 명령어를 사용
```less
# 설치된 사운드카드 목록
cat /proc/asound/cards

# USB Audio Device (첫 번째)로 재생
aplay -D plughw:0,0 /home/pi/www/sound/bell.wav

# 소리나는 거
aplay -D plughw:1,0 /home/pi/www/sound/bell.wav

# 내장 헤드폰으로 재생
aplay -D plughw:3,0 /home/pi/www/sound/bell.wav

# HDMI 오디오로 재생
aplay -D plughw:4,0 /home/pi/www/sound/bell.wav

# HDMI 오디오로 재생
aplay -D plughw:5,0 /home/pi/www/sound/bell.wav
```

#### pulse audio 디폴트 장치 출력 설정
```less
cvlc --play-and-exit /home/pi/www/sound/bell.wav

# 기본 장치 USB_Audio_Device 0 출력으로 설정하기  (도어락 스피커)
# USB 오디오 장치 (0번 카드가 아니라 usb-C-Media_Electronics_Inc.가 붙은 장치)를 기본 출력 장치로 설정하는 겁니다.
pactl set-default-sink alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo

# 기본 장치 audio.analog-stereo 1 출력으로 설정하기 (소리안남)
pactl set-default-sink alsa_output.platform-bcm2835_audio.analog-stereo

# 기본 장치 hdmi.hdmi-stereo 2 출력으로 설정하기 (내측스피커)
pactl set-default-sink alsa_output.platform-fef00700.hdmi.hdmi-stereo
```

#### 장치 지정해서 소리 출력
```less
# hdmi 내측 스피커 벨 출력 (오디오 출력장치 지정)
cvlc --play-and-exit /home/pi/www/sound/bell.wav --alsa-audio-device hdmi:CARD=vc4hdmi0,DEV=0

# 별도의 오디오 장치 지정 없이 기본 ALSA/PulseAudio 설정을 따른다
cvlc --play-and-exit /home/pi/www/sound/bell.wav

# 도어락 외측 스피커 벨 출력
cvlc --play-and-exit /home/pi/www/sound/bell.wav --alsa-audio-device iec958:CARD=Device,DEV=0 --aout=alsa
```

#### 장치 점유 해제 느려서 --play-and-exit 키워드 넣고 소리 출력해야함
```less
cvlc --play-and-exit /home/pi/www/sound/bell.wav

# Ctrl+C로 끊을 때 VLC가 오디오 장치 점유 해제 못하는 경우 많음
cvlc /home/pi/guest_voice/voice_record_no.mp3

# 현재 기본으로 설정된 sink의 인덱스를 표시
pacmd list-sinks | grep '* index'

* index: 1
```

#### 입력 장치 조회
```less
pacmd list-sources | grep -E 'name:|device.description|index|state'

pacmd list-sources | grep '* index'

pactl list short sources

pactl list sources
```

#### 볼륨 조절
```less
#  ALSA 쪽에서 HDMI 오디오 볼륨이 너무 낮거나 뮤트 되어있는지 확인
alsamixer
alsamixer 실행 후 F6 눌러 HDMI 디바이스 선택하고 볼륨 확인/조정
```










