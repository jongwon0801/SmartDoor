#### Dockerfile
```less
FROM python:3.9-slim

WORKDIR /app/www

# 1. 시스템 레벨 기본 의존성 설치:
#    빌드 필수 도구, 파이썬 개발 헤더, 암호화 관련 lib 등
RUN apt-get update && apt-get install -y \
    build-essential \
    python3-dev \
    libffi-dev \
    libssl-dev \
    --no-install-recommends && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# 2. 컴파일러 및 복잡한 라이브러리 빌드 도구:
#    cmake, gcc, gfortran, boost (dlib 의존성), rust (cryptography 의존성) 등
RUN apt-get update && apt-get install -y \
    cmake \
    gcc \
    gfortran \
    pkg-config \
    libsm-dev \
    libxext-dev \
    libgtk-3-dev \
    libboost-python-dev \
    libboost-thread-dev \
    rustc \
    cargo \
    --no-install-recommends && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# 3. 과학 계산 및 이미지/QR 코드 관련 시스템 라이브러리:
#    선형대수 라이브러리 (NumPy/SciPy 의존성), ZBar 라이브러리 (pyzbar 의존성)
RUN apt-get update && apt-get install -y \
    libblas-dev \
    liblapack-dev \
    python3-numpy \
    python3-scipy \
    python3-opencv \ 
    libzbar0t64 \
    libzbar-dev \
    zbar-tools \
    --no-install-recommends && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# requirements.txt 파일 복사 (아직 설치는 하지 않음)
COPY requirements.txt /app/requirements.txt

# pip 자체 및 빌드 관련 도구 업그레이드 및 설치
RUN pip install --upgrade pip
RUN pip install --no-cache-dir --no-deps setuptools wheel setuptools_rust

# Cryptography (Rust 컴파일러 문제 해결 후 명시적 설치)
RUN pip install --no-cache-dir --no-deps cryptography==41.0.7 --prefer-binary

# OpenCV Python Bindings (cv2 모듈 로딩 문제 해결 및 헤드리스 버전 설치)
RUN pip install --no-cache-dir opencv-python-headless

# dlib (가장 오래 걸리는 컴파일. Face-recognition 등의 의존성)
RUN pip install --no-cache-dir --no-deps dlib==20.0.0 --prefer-binary

# Face-recognition 관련 (dlib에 의존)
RUN pip install --no-cache-dir --no-deps face-recognition-models==0.3.0 face-recognition==1.3.0 --prefer-binary

# pyzbar (zbar 시스템 라이브러리에 의존, QR 코드 스캔)
RUN pip install --no-cache-dir --no-deps pyzbar==0.1.9 --prefer-binary

# 나머지 requirements.txt에 있는 패키지들 설치
# 중요: 위에 명시적으로 설치된 패키지들은 requirements.txt에서 제거하거나 주석 처리하세요.
RUN pip install --no-cache-dir \
    -r /app/requirements.txt \
    --no-deps \
    --prefer-binary

# 애플리케이션 파일 복사 (주로 개발 중 자주 변경되므로 가장 아래에 배치)
COPY ./www/ .

# 컨테이너 실행 명령어
CMD ["python", "python/webserver.py"]
```

#### docker-compose.yml
```less
version: '3'
services:
  tornado:
    build: .
    container_name: smartdoor_app
    privileged: true  # 하드웨어 접근 권한 부여 (거의 필수적입니다)
    ports:
      - "8080:8080"  
    restart: unless-stopped
    volumes:
      # 애플리케이션 코드 마운트
      - ./www:/app/www

      # 설정 파일 마운트 (읽기 전용: :ro)
      - "/boot/config.txt:/boot/config.txt:ro"
      - "/etc/udev/rules.d/99-com.rules:/etc/udev/rules.d/99-com.rules:ro"
      - "/usr/share/X11/xorg.conf.d/40-libinput.conf:/usr/share/X11/xorg.conf.d/40-libinput.conf:ro"
      
    # udev 규칙에 따라 생성되는 심볼릭 링크 디바이스들을 컨테이너에 마운트
    # /dev/input/event* 에 대한 접근을 위해서 /dev/input도 필요할 수 있습니다.
    # KERNELS=="fe201a00.serial" -> /dev/hione (UART5)
    # X11 libinput에서 필요할 수 있는 입력 디바이스들
    devices:
      - "/dev/ttyUSB_PIR:/dev/ttyUSB_PIR"
      - "/dev/hione:/dev/hione" 
      - "/dev/cam_inside:/dev/cam_inside"
      - "/dev/cam_outside:/dev/cam_outside"
      - "/dev/input:/dev/input"

    # (필요한 경우) 호스트 네트워크 모드 사용 (일부 디바이스 통신에 유용할 수 있음)
    # network_mode: "host" 
```
































