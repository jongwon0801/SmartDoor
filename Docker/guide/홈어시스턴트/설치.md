#### 1. 시스템 업데이트
```less
# 장치 모델 확인
cat /proc/cpuinfo | grep Model

# OS 버젼확인
cat /etc/os-release

sudo apt-get update
sudo apt-get upgrade -y
```

#### 2. 필요한 패키지를 설치
```less
sudo apt-get install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common
```

#### 3. Docker의 공식 GPG 키를 추가
```less
curl -fsSL https://download.docker.com/linux/$(. /etc/os-release; echo "$ID")/gpg | sudo apt-key add -
```


#### 4. Docker 저장소를 추가
```less
echo "deb [arch=armhf] https://download.docker.com/linux/$(. /etc/os-release; echo "$ID") $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list
```

#### 5. 다시 패키지 목록을 업데이트
```less
sudo apt-get update
```

#### 6. Docker를 설치
```less
sudo apt-get install -y docker-ce docker-ce-cli containerd.io
```

#### 7. Docker Compose 설치하기
```less
sudo apt-get update
sudo apt-get install -y python3-pip
sudo pip3 install docker-compose
```

#### 8. 디렉토리 생성
```less
# Home Assistant 설정 파일을 저장할 디렉토리를 생성
mkdir -p /home/pi/docker/homeassistant_config
```

#### 9. docker-compose.yml 생성
```less
sudo nano docker-compose.yml
```

```less
version: '3'
services:
  homeassistant:
    container_name: homeassistant
    image: ghcr.io/home-assistant/home-assistant:stable
    privileged: true
    restart: unless-stopped
    environment:
      - TZ=Asia/Seoul  # 한국 시간대로 설정
    volumes:
      - /home/pi/docker/homeassistant_config:/config  # 설정 파일 저장 위치
      - /run/dbus:/run/dbus:ro
    network_mode: host
```

#### docker-compose (레거시 / Python 기반)
```less
docker-compose up -d

# Docker Engine과 docker-compose의 버전 호환성 문제(TypeError)
# Docker CLI에 통합된 Go 기반의 플러그인 Docker Compose 플러그인 설치
```

#### 10. Docker Compose 플러그인 사용
```less
# 플러그인 설치
sudo apt-get update
sudo apt-get install docker-compose-plugin

# 사용 방법
docker compose up -d  # 'docker-compose' 대신 'docker compose' 사용

# pi 사용자를 docker 그룹에 추가
sudo usermod -aG docker pi

# 현재 세션에 그룹을 적용
newgrp docker

# 권한이 제대로 적용되었는지 확인
(출력 결과에 'docker'가 포함되어 있어야 합니다)
groups

docker compose up -d
```











