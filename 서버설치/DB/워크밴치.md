#### 춘의동 세탁소 11013 워크밴치로 연결

```less
SELECT user, host FROM mysql.user WHERE user = 'root';

+------+-----------+
| user | host      |
+------+-----------+
| root | localhost |
+------+-----------+
```
MariaDB(MySQL) 내부에서 root 사용자 계정이 어떤 호스트(컴퓨터, IP)에서 접속할 수 있는지 확인하는 명령어

#### 디비접속 계정 생성
```less
# MariaDB에서 pi라는 사용자 계정을 만들고, 비밀번호를 tmshdnxmfl로 설정
CREATE USER 'pi'@'%' IDENTIFIED BY 'tmshdnxmfl';

GRANT ALL PRIVILEGES ON *.* TO 'pi'@'%';

FLUSH PRIVILEGES;

# 포트 확인
SHOW VARIABLES LIKE 'port';

+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| port          | 3306  |
+---------------+-------+
```

#### 외부 접속 허용 설정 확인 (bind-address)
```less
# MariaDB 또는 MySQL 설정 파일 확인
sudo nano /etc/mysql/my.cnf

!includedir /etc/mysql/conf.d/
!includedir /etc/mysql/mariadb.conf.d/

sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf

bind-address = 127.0.0.1
이면 외부 접속 차단 상태
```

```less
sudo mysql -u root -p

mysql> SELECT user, host FROM mysql.user;
+------------------+-----------+
| user             | host      |
+------------------+-----------+
| yellowbox        | %         |
| mysql.infoschema | localhost |
| mysql.session    | localhost |
| mysql.sys        | localhost |
| root             | localhost |
| yellowbox        | localhost |
+------------------+-----------+
```
yellowbox % 어느 IP에서든 접속 가능한 일반 사용자 계정입니다.


만약 워크벤치나 외부 PC에서 root로 접속하고 싶다면?
```less
root@% 계정을 별도로 추가해야 합니다

CREATE USER 'root'@'%' IDENTIFIED BY '원하는_비밀번호';

GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' WITH GRANT OPTION;

FLUSH PRIVILEGES;
```

#### 
```less
mysql> SELECT USER(), CURRENT_USER();
+----------------+----------------+
| USER()         | CURRENT_USER() |
+----------------+----------------+
| root@localhost | root@localhost |
+----------------+----------------+

함수	결과	의미
USER() : root@localhost	현재 MariaDB에 접속 시도한 사용자와 호스트
CURRENT_USER() : root@localhost	실제 MariaDB에서 인증되고 권한이 적용된 사용자

외부(예: 워크벤치, 다른 PC)에서 접속하면 USER()는 root@IP주소로 나올 수 있고,

CURRENT_USER()는 실제 인증된 사용자 계정(root@% 등)으로 표시됩니다.
```

#### 지금 접속 중인 모든 사용자 세션 목록
```less
mysql> SHOW PROCESSLIST;

+-------+-----------------+---------------+-----------+---------+---------+------------------------+------------------+
| Id    | User            | Host          | db        | Command | Time    | State                  | Info             |
+-------+-----------------+---------------+-----------+---------+---------+------------------------+------------------+
|     5 | event_scheduler | localhost     | NULL      | Daemon  | 5106174 | Waiting on empty queue | NULL             |
|    28 | yellowbox       | wikibox:41710 | yellowbox | Sleep   |       1 |                        | NULL             |
|    30 | yellowbox       | wikibox:42904 | yellowbox | Sleep   |       1 |                        | NULL             |
|    32 | yellowbox       | wikibox:44610 | yellowbox | Sleep   |       6 |                        | NULL             |
| 31877 | yellowbox       | wikibox:35268 | yellowbox | Sleep   |       0 |                        | NULL             |
| 36386 | yellowbox       | wikibox:52996 | yellowbox | Sleep   |       6 |                        | NULL             |
| 36387 | yellowbox       | wikibox:52998 | yellowbox | Sleep   |    3057 |                        | NULL             |
| 36405 | yellowbox       | wikibox:53212 | yellowbox | Sleep   |    2739 |                        | NULL             |
| 36449 | yellowbox       | wikibox:53496 | yellowbox | Sleep   |    2768 |                        | NULL             |
| 36450 | yellowbox       | wikibox:53500 | yellowbox | Sleep   |    2774 |                        | NULL             |
| 41973 | yellowbox       | wikibox:48624 | yellowbox | Sleep   |    2774 |                        | NULL             |
| 44973 | yellowbox       | wikibox:35424 | yellowbox | Sleep   |    5249 |                        | NULL             |
| 45017 | root            | localhost     | NULL      | Query   |       0 | init                   | SHOW PROCESSLIST |
+-------+-----------------+---------------+-----------+---------+---------+------------------------+------------------+
```
