✅ 1️⃣ 등록된 사용자 (인식 성공)

✅ 얼굴 인식 성공
TTS 응답:
"홍길동님, 어서오세요."

동작:
→ 문 열림

✅ QR코드 인증 성공
TTS 응답:
"인증되었습니다. 문을 열게요."

동작:
→ 문 열림

"프로세스 종료" → "등록 사용자 인증 실패 → 미등록 프로세스 전환"

❌ 2️⃣ 미등록 사용자 / 인식 실패

🔁 프로세스 흐름

얼굴 인식 실패 → QR 실패 → TTS로 안내

"처음 오셨나요? 문 열기, 입주자 호출, 무엇을 도와드릴까요?"
(tts 음성 끝나면 음성 입력 프로세스 시작)

#### 손님 발화 → GPT 기반 intent 분류

1. 우선은 로컬 키워드 기반으로 빠르게 처리

2. 키워드로 못 알아들은 경우만 GPT에 보내기
→ 예: "들어가도 될까요?" → 키워드 없음 → GPT에 보냄

📌 상황별 처리

if 1
🗣 “문 열어주세요”
→ 도어 개방 요청

→ TTS로 비밀번호 안내: "비밀번호를 말씀해주세요."

→ 비밀번호 일치: "문을 열겠습니다." → 문 열림

→ 비밀번호 불일치: "비밀번호가 다릅니다."

if 2
🗣 “입주자 호출” 또는 관련 문맥
→ 입주자(사장님)에게 알림 전송

→ "입주자에게 연락을 드렸습니다." 안내

exception

🗣 말이 이상하거나 GPT가 인식 실패
→ TTS 응답: "죄송합니다. 다시 말씀해주세요."


사람이 왔을 때 AI가 다음처럼 행동합니다:

1. **사진이 등록된 사람**이면 자동으로 얼굴을 인식해 문을 열고, "홍길동님, 어서오세요"라고 인사합니다.

2. **QR코드로 인증**된 경우도 마찬가지로 문을 엽니다.

3. **모르는 사람이 오면** AI가 직접 말 겁니다:
   - "처음 오셨나요? 문 열기, 입주자 호출, 무엇을 도와드릴까요?"
   - 손님이 "문 열어주세요"라고 하면 → 비밀번호를 물어보고 → 맞으면 문 열고, 틀리면 실패.
   - "입주자 호출"이라고 하면 → 사장님에게 알림 보내드립니다.
   - 이상한 말엔 "다시 말씀해주세요"라고 응답합니다.


