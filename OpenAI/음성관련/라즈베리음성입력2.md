#### 🐍 Python 코드 설명

```less
import sounddevice as sd
print(sd.query_devices())

설명:
연결된 **모든 오디오 장치(입출력 포함)**의 정보를 리스트 형식으로 출력합니다.

용도:
어떤 오디오 장치들이 있는지, 인덱스가 무엇인지 확인할 때 사용합니다.
```

```less
   0 bcm2835 Headphones: - (hw:0,0), ALSA (0 in, 8 out)
   1 USB Audio Device: - (hw:1,0), ALSA (0 in, 2 out)
   2 USB 4K Live Camera: Audio (hw:2,0), ALSA (1 in, 0 out)
   3 vc4-hdmi-0: MAI PCM i2s-hifi-0 (hw:3,0), ALSA (0 in, 6 out)
   4 sysdefault, ALSA (0 in, 128 out)
   5 lavrate, ALSA (0 in, 128 out)
   6 samplerate, ALSA (0 in, 128 out)
   7 speexrate, ALSA (0 in, 128 out)
   8 pulse, ALSA (32 in, 32 out)
   9 upmix, ALSA (0 in, 8 out)
  10 vdownmix, ALSA (0 in, 6 out)
  11 dmix, ALSA (0 in, 2 out)
* 12 default, ALSA (32 in, 32 out)
```

```less
import sounddevice as sd
device_info = sd.query_devices(2, 'input')
print(device_info)

설명:
인덱스 2번에 해당하는 **입력 장치(input)**의 세부 정보를 출력합니다.

용도:
특정 마이크의 지원 샘플레이트, 입력 채널 수, 디바이스 이름 등을 확인할 수 있습니다.

2는 위에서 확인한 장치 번호입니다 (입력 전용일 수도, 입력+출력 겸용일 수도 있음).

# 입력 가능한 마이크가 맞고, 실제 녹음 가능한 장치입니다.
{'name': 'USB 4K Live Camera: Audio (hw:2,0)', 'index': 2, 'hostapi': 0, 'max_input_channels': 1,
'max_output_channels': 0, 'default_low_input_latency': 0.015958333333333335, 'default_low_output_latency': -1.0,
'default_high_input_latency': 0.064, 'default_high_output_latency': -1.0, 'default_samplerate': 24000.0}
```

```less
import sounddevice as sd
device_info = sd.query_devices(3, 'input')
print(device_info)


Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/pi/.virtualenvs/elcsoft/lib/python3.9/site-packages/sounddevice.py", line 604, in query_devices
    raise ValueError(

# 즉, 3번 장치는 입력 채널이 없기 때문에 마이크로 쓸 수 없다는 뜻입니다.
ValueError: Not an input device: 'vc4-hdmi-0: MAI PCM i2s-hifi-0 (hw:3,0)'


>>> print(device_info)
{'name': 'USB 4K Live Camera: Audio (hw:2,0)', 'index': 2, 'hostapi': 0, 'max_input_channels': 1,
 'max_output_channels': 0, 'default_low_input_latency': 0.015958333333333335, 'default_low_output_latency': -1.0,
 'default_high_input_latency': 0.064, 'default_high_output_latency': -1.0, 'default_samplerate': 24000.0}


import sounddevice as sd
device_info = sd.query_devices(12, 'input')
print(device_info)

{'name': 'default', 'index': 12, 'hostapi': 0, 'max_input_channels': 32, 'max_output_channels': 32,
'default_low_input_latency': 0.008684807256235827, 'default_low_output_latency': 0.008684807256235827,
'default_high_input_latency': 0.034807256235827665, 'default_high_output_latency': 0.034807256235827665,
'default_samplerate': 44100.0}

name: "default" → PulseAudio나 ALSA 설정에 따라 기본으로 선택된 장치입니다. 이 경우 실제로는 2번(USB 4K Live Camera: Audio`)일 가능성이 높습니다.

max_input_channels: 32
→ 최대 32개의 입력 채널을 지원하지만, 실제로 연결된 마이크는 1개일 수 있음 (가상 믹서 포함된 숫자).

default_samplerate: 44100.0
→ 기본 샘플레이트는 CD 품질과 동일한 44.1kHz.
```

| 항목                             | 설명               | 용도             |
| ------------------------------ | ---------------- | -------------- |
| `sd.query_devices()`           | 모든 사운드 장치 출력     | 장치 인덱스 확인      |
| `sd.query_devices(n, 'input')` | 특정 입력 장치 정보      | 마이크 설정 확인      |
| `pactl list sources short`     | PulseAudio 소스 목록 | 입력 소스 이름/상태 확인 |



```less
pactl list sources short

설명:
PulseAudio에 등록된 **입력 소스(마이크 등)**를 짧은 형식으로 나열합니다.

용도:

마이크 디바이스의 PulseAudio 이름을 확인하고,

PULSE_SOURCE 설정에 활용하거나,

디바이스 상태 확인 등에 사용합니다.

```

```less
0	alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo.monitor
	module-alsa-card.c	s16le 2ch 44100Hz	SUSPENDED
1	alsa_input.usb-Sonix_Technology_Co.__Ltd._USB_4K_Live_Camera_SN0001-02.mono-fallback
	module-alsa-card.c	s16le 1ch 24000Hz	SUSPENDED
2	alsa_output.platform-bcm2835_audio.analog-stereo.monitor
module-alsa-card.c	s16le 2ch 44100Hz	SUSPENDED
3	alsa_output.platform-fef00700.hdmi.hdmi-stereo.monitor
module-alsa-card.c	s16le 2ch 48000Hz	SUSPENDED
```







