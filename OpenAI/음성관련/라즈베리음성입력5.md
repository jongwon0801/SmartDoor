#### pulse server 경로
```less
echo $XDG_RUNTIME_DIR
/run/user/1000

echo $PULSE_SERVER (비어있음)
보통은 비어있거나 unix:/run/user/1000/pulse/native 같은 값이 나옵니다.
```

#### pulse server 오류
```less
/run/user/1000/pulse 경로에 native  pid 없으면
pulse audio 안켜짐

이 디렉터리는 진짜 PulseAudio 데몬이 돌아갈 때만 생깁니다.

PipeWire가 대신할 경우, 이 경로들이 비어 있거나 안 만들어지는 게 정상입니다.
```

#### pipewire 실행 중 확인
```less
ps aux | grep pipewire

ps aux | grep -E 'pipewire|pulse'
```

#### PipeWire 중지
```less
# PipeWire 관련 서비스 중지
systemctl --user stop pipewire
systemctl --user stop pipewire-media-session
systemctl --user stop pipewire-pulse.service  # PulseAudio 에뮬레이션 중지 (없음)

# PipeWire 부팅 시 자동 시작 방지 (한 번만 하면 됨)
systemctl --user disable pipewire
systemctl --user disable pipewire-media-session (없음)
systemctl --user disable pipewire-pulse.service (없음)
```

#### PulseAudio 재시작 (필수)
```less
pulseaudio --check

pulseaudio -k

pulseaudio --start

# 설정꼬이면 삭제
rm -rf ~/.config/pulse

pactl set-default-sink 2

# hdmi 내측 스피커 2번으로 디폴트 설정
pactl set-default-sink alsa_output.platform-fef00700.hdmi.hdmi-stereo

# 도어락 스피커 0번으로 디폴트 설정
pactl set-default-sink alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo

pacmd list-sinks | grep '* index'

cat 8e36a3832f5b4c0ebd48dfb48748ddb2-default-sink
alsa_output.platform-fef00700.hdmi.hdmi-stereo
```

#### 현재 사운드 출력 장치 확인
```less
pactl list sinks

pactl list short sinks

pacmd list-sinks | grep '* index'
```

#### pulse audio로 wav 재생
```less
# PulseAudio가 정상 동작 중이면, VLC가 PulseAudio에 접근 가능해야 합니다.

# VLC에게 명시적으로 PulseAudio를 사용하라고 지시함
cvlc --aout=pulse --play-and-exit /home/pi/guest_voice/voice_record_no.wav
```

```less
cvlc --play-and-exit /home/pi/guest_voice/voice_record_no.wav
VLC가 기본 오디오 출력 방식을 사용합니다.

이 출력 방식은 시스템 설정에 따라 달라지며, 예를 들어:

PipeWire가 활성화돼 있으면 PipeWire → Pulse → ALSA로 흐름이 갈 수 있고,

PulseAudio만 있으면 PulseAudio 사용,

PulseAudio가 비활성화되면 ALSA 등으로 대체됨.

문제: 기본 출력이 실패할 가능성 있음 (특히 PulseAudio가 비정상일 때).
```

```less
ps aux | grep pulseaudio

kill -9
```



sudo apt update
sudo apt install sox libsox-fmt-all









