#### 실행해서 현재 재생 중인 프로세스와 연결된 출력 장치 정보 확인 가능
```less
pactl list short sinks
```

| 번호  | 이름                                                                           | 설명                                    |
| --- | ---------------------------------------------------------------------------- | ------------------------------------- |
| `0` | `alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo` | 🔊 **USB 오디오 디바이스 (도어락 스피커일 가능성 있음)** |
| `1` | `alsa_output.platform-bcm2835_audio.analog-stereo`                           | 🎧 **Raspberry Pi 내장 3.5mm 헤드폰 출력**   |
| `2` | `alsa_output.platform-fef00700.hdmi.hdmi-stereo`                             | 📺 **HDMI 오디오 출력**                    |


```less
cvlc /home/pi/guest_voice/voice_record_no.mp3
cvlc -vvv /home/pi/guest_voice/voice_record_no.mp3

출력 중 audio output 관련 로그에서 어느 디바이스를 사용하는지 추정 가능
```
```less
pulse audio output debug: connected to sink alsa_output.platform-fef00700.hdmi.hdmi-stereo
pulse audio output debug: changing sink 2: alsa_output.platform-fef00700.hdmi.hdmi-stereo (내장 오디오  Digital Stereo (HDMI))
```

| 명령어                                               | 출력 방식                 | 출력 장치 지정                     |
| ------------------------------------------------- | --------------------- | ---------------------------- |
| `cvlc --aout alsa --alsa-audio-device hw:1,0 ...` | ALSA 직접 사용, hw:1,0 지정 | ALSA hw:1,0 (USB 사운드카드 등)    |
| `cvlc ...`                                        | 시스템 기본 오디오 출력 사용      | PulseAudio 또는 ALSA 기본 설정에 따름 |


#### 이거 하니까안나옴
```less
pactl set-default-sink alsa_output.platform-fef00700.hdmi.hdmi-stereo
cvlc /home/pi/guest_voice/voice_record_no.mp3
```
```less
# 현재 PulseAudio sink 상태 확인
pactl list sinks short

# 현재 실행 중인 프로세스가 올바른 sink에 연결됐는지 확인
pactl list sink-inputs

# PulseAudio 장치 활성화 시도
pactl suspend-sink 2 false
```

```less
cvlc --play-and-exit /home/pi/guest_voice/voice_record_no.wav

# 기본 장치 USB_Audio_Device 0 출력으로 설정하기  (도어락 스피커)
# USB 오디오 장치 (0번 카드가 아니라 usb-C-Media_Electronics_Inc.가 붙은 장치)를 기본 출력 장치로 설정하는 겁니다.
pactl set-default-sink alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo

--> `0` 장치 USB_Audio_Device 로 PulseAudio 출력 변경 

# 기본 장치 audio.analog-stereo 1 출력으로 설정하기 (소리안남)
pactl set-default-sink alsa_output.platform-bcm2835_audio.analog-stereo

# 기본 장치 hdmi.hdmi-stereo 2 출력으로 설정하기 (내측스피커)
pactl set-default-sink alsa_output.platform-fef00700.hdmi.hdmi-stereo

# Ctrl+C로 끊을 때 VLC가 오디오 장치 점유 해제 못하는 경우 많음
cvlc /home/pi/guest_voice/voice_record_no.mp3

# 현재 기본으로 설정된 sink의 인덱스를 표시

pacmd list-sinks | grep '* index'

  * index: 1

# PulseAudio 재시작
pulseaudio -k
pulseaudio --start

ps aux | grep pulseaudio
```

#### vlc cvlc 안전종료
```less
1. q 키 누르기

cvlc 실행 중에 터미널에서 q 키를 누르면 VLC가 정상 종료하면서 오디오 장치도 제대로 해제합니다.

Ctrl+C보다 훨씬 안전해요.
```

```less
2. kill 명령어 사용 (다른 터미널에서)

ps aux | grep vlc 로 PID 확인 후

kill PID (SIGTERM) 하면 정상 종료 시도

kill -9 PID 는 강제 종료이니 가능한 kill만 쓰는 게 좋아요.
```

```less
3. 재생할 때 --play-and-exit 옵션 사용

cvlc --play-and-exit /home/pi/guest_voice/voice_record_no.wav

재생 끝나면 자동으로 종료되므로, 수동 종료를 줄여줍니다.
```

✅ HDMI 출력 상태 점검
```less
amixer -c 3

alsamixer -c 3
```
```less
alsamixer -c 1
1번 카드 소리조절
```

#### 실제 출력 장치가 어디인지 볼 수 있는 명령
```less
pacmd list-sinks | grep -E 'name:|device.description|index|state'

  * index: 0
	name: <alsa_output.usb-C-Media_Electronics_Inc._USB_Audio_Device-00.analog-stereo>
	state: SUSPENDED
		device.description = "USB Audio Device 아날로그 스테레오 "
    index: 1
	name: <alsa_output.platform-bcm2835_audio.analog-stereo>
	state: SUSPENDED
		device.description = "내장 오디오  Analog Stereo"
    index: 2
	name: <alsa_output.platform-fef00700.hdmi.hdmi-stereo>
	state: SUSPENDED
		device.description = "내장 오디오  Digital Stereo (HDMI)"
```

```less
systemctl --user status pulseaudio.service

systemctl --user status pulseaudio.socket

ps aux | grep pulseaudio

ps aux | grep PipeWire

/run/user/1000/pulse/native 있는지확인

/home/pi/.config/pulse 경로
-default-sink	- 기본 출력장치
-default-source	- 기본 입력장치

# 출력 장치 조회
pacmd list-sinks | grep -E 'name:|device.description|index|state'

pacmd list-sinks | grep '* index'
```










